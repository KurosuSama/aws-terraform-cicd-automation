# CI/CD Automation: AWS Infrastructure & Application Deployment

![GitHub Actions](https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white)
![Ansible](https://img.shields.io/badge/ansible-%23990000.svg?style=for-the-badge&logo=ansible&logoColor=white)
![Terraform](https://img.shields.io/badge/terraform-%235835CC.svg?style=for-the-badge&logo=terraform&logoColor=white)
![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)

Automated application deployment pipeline for High Availability AWS infrastructure using GitHub Actions for orchestration and Ansible Dynamic Inventory for real-time fleet management.

## Project Objective

The objective is to implement a fully automated Continuous Deployment (CD) pipeline. By moving the execution environment to GitHub Actions, the project eliminates manual local configuration and ensures that application updates are delivered to the AWS Auto Scaling Group consistently and securely.

### Technical Evolution: Manual Ops vs. Automated CI/CD

| Feature | Local Deployment | CI/CD Automation |
| :--- | :--- | :--- |
| **Execution Environment** | **Local Machine.** Relies on the developer's laptop, local SSH keys, and manual execution of `ansible-playbook` commands. | **GitHub Actions Runner.** Fully automated, headless execution triggered by code commits. Removes dependency on local environments. |
| **Inventory Management** | **Static/Generated File.** Relied on a static `inventory.ini` generated by Terraform. Prone to being outdated if ASG scales during deployment. | **Dynamic Inventory (Plugin).** Ansible queries the AWS API directly via `aws_ec2.yml` plugin to fetch the real-time list of running instances based on tags. |
| **Security Access** | **Static/Manual.** Required manually adding the developer's IP to the Security Group or keeping port 22 open to a broad range. | **Ephemeral (Dynamic).** The pipeline automatically detects the Runner's IP, authorizes it in the Security Group only for the duration of the deployment, and revokes it immediately after. |

## Technology Stack

* **Orchestration (CI/CD):** GitHub Actions
* **Configuration Management:** Ansible (with `amazon.aws` collection)
* **Infrastructure:** Terraform (VPC, ASG, ALB)
* **Cloud Provider:** AWS

## Key Features

* **Ansible Dynamic Inventory:**
    The pipeline uses the `aws_ec2` plugin to dynamically discover EC2 instances filtering by `tag:Name` and `instance-state-name: running`. This ensures deployment always targets active servers, even during Auto Scaling events.

* **Ephemeral Security Group Whitelisting:**
    GitHub Actions Runners have dynamic, unpredictable IP addresses. To maintain security without opening SSH to the world (`0.0.0.0/0`), the pipeline implements a security automation steps:
    *  Fetches the current Runner's Public IP.
    *  Uses AWS CLI to **authorize** ingress on Port 22 for that specific IP in the App Security Group.
    *  Runs the Ansible Playbook.
    *  **Revokes** the ingress rule immediately (using `if: always()` condition) to ensure no security holes remain.

## Prerequisites & Secrets

To run this pipeline, the following **GitHub Secrets** must be configured in the repository settings:

* `AWS_ACCESS_KEY_ID` / `AWS_SECRET_ACCESS_KEY`: IAM credentials with permissions for EC2 (Describe, AuthorizeSecurityGroupIngress) and S3.
* `SSH_PRIVATE_KEY`: The private key (`.pem`) corresponding to the Public Key uploaded to EC2 instances.
* `APP_SG_ID`: The ID of the Security Group attached to the EC2 instances (e.g., `sg-0123456789abcdef`).

## Deployment Workflow

The infrastructure is provisioned via Terraform, while the application deployment is handled by the GitHub Actions pipeline defined in `.github/workflows/deploy.yml`.

**1. Infrastructure Provisioning (Terraform)**
*Standard provisioning of the HA Cluster (VPC, ASG, ALB).*
```bash
cd terraform
terraform init
terraform apply
